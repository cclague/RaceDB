{% extends "base.html" %}
{% load i18n %}
{% load static %}
{% load staticfiles %}

{% block content %}
{% include "hub_nav.html" %}
<h1>
	<strong><a href="/RaceDB/Hub/CompetitionResults/{{event.competition.id}}/">{{event.competition.name}}</a>: {{event.name}}</strong><br/>
	<span style="font-size: 75%">
		<strong>{{category.code_gender}} - {{wave.name}}</strong>&nbsp;&nbsp;{{event.competition.discipline.name}} {{event.competition.race_class.name}}<br/>
		{{event.date_time}}&nbsp;&nbsp; {% trans "Nations" %}: {{num_nationalities}}&nbsp;&nbsp; {% trans "Strs" %}: {{num_starters}}
	</span>
</h1>
{% trans "Generated" %}: {{time_stamp|date:"Y-m-d H:i:s"}}
<p/>
<style>
table.participant_table tr td {
	font-size: 85%;
}
table.participant_table tr th {
	font-size: 85%;
}
</style>
{% spaceless %}
<table class="table table-striped table-hover table-condensed participant_table">
<thead>
	<tr>
		<th class="text-right">{% trans "Rank" %}</th>
		<th class="text-right">{% trans "Bib" %}</th>
		<th>{% trans "Name" %}</th>
		<th>{% trans "Team" %}</th>
		{% if wave.rank_categories_together %}<th>{% trans "Category" %}</th>{% endif %}
		<th>{% trans "License" %}</th>
		<th>{% trans "UCIID" %}</th>
		<th class="text-right">{% trans "Time" %}</th>
		<th class="text-right">{% trans "Gap" %}</th>
	</tr>
</thead>
<tbody>
	{% for rr in results %}
		{% with p=rr.participant h=rr.participant.license_holder %}
		<tr onclick="jump('/RaceDB/Hub/LicenseHolderResults/{{h.id}}')">
			<td class="text-right">{% if wave.rank_categories_together %}{{rr.wave_rank_html}}{% else %}{{rr.category_rank_html}}{% endif %}</td>
			<td class="text-right">{{p.bib}}</td>
			<td><a href="/RaceDB/Hub/LicenseHolderResults/{{h.id}}">{{h.full_name}}</a></td>
			<td>{% if p.team %}{{p.team.name}}{% endif %}</td>
			{% if wave.rank_categories_together %}<td>{{p.category.code_gender}}</td>{% endif %}
			<td>{{h.license_code_trunc}}</td>
			<td>{{h.get_flag_uci_id_html}}</td>
			<td class="text-right">{{rr.adjusted_finish_time.format_no_decimals}}</td>
			<td class="text-right">{% if wave.rank_categories_together %}{{rr.wave_gap}}{% else %}{{rr.category_gap}}{% endif %}</td>
		</tr>
		{% endwith %}
	{% endfor %}
</tbody>
</table>
{% endspaceless %}
{% endblock content %}
