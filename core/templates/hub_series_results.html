{% extends "base.html" %}
{% load i18n %}
{% load crispy_forms_tags %}
{% load paginate_html %}
{% block content %}

{% include "hub_nav.html" %}
<style>
table.results-table tr td {
	font-size: 85%;
}
table.results-table tr th {
	font-size: 85%;
}
</style>
{% spaceless %}
<table class="table table-striped table-hover table-condensed results-table">
<thead>
	<tr>
		<th></th>
		<th>{% trans "Name" %}</th>
		<th>{% trans "Team" %}</th>
		<th class='text-right'>
			{% if series.ranking_criteria == 0 %}
				{% trans "Time" %}
			{% else %}
				{% trans "Points" %}
			{% endif %}
		</th>
		<th class='text-right'>{% trans "Gap" %}</th>
		{% for e in events %}
			<th colspan="2" class="text-center">
				{{e.event.date_time|date:"D b d, Y"}}<br/>
				{{e.competition.name}}<br/>
				<a href='/RaceDB/Hub/CategoryResults/{{e.id}}/{{e.event_type}}/{{category.id}}/'>{{e.event.name}}</a><br/>
			</th>
		{% endfor %}
	</tr>
</thead>
<tbody>
	{% for lh, team, totalValue, gap, event_results in results %}
		<tr>
			<td class="text-right">{{forloop.counter1}}</td>
			<td><a href='/RaceDB/Hub/Hub/LicenseHolderResults/{{lh.id}}/'>{{lh.full_name}}</a></td>
			<td>{{team}}</td>
			<td class='text-right'>{{totalValue}}</td>
			<td class='text-right'>{{gap}}</td>
			{% for er in event_results %}
				{% if er %}
					<td class='text-right {% if er.ignored %}ignored{% endif %}'>
						{{er.value_for_rank}}{% if er.ignored %}&nbsp;&#x2021;{% endif %}
					</td>
					<td class='text-right'>
						{{er.starters_text}}{% if er.upgraded %}&nbsp;&#x2021;&#x2021;{% endif %}
					</td>
				{% else %}
					<td></td>
					<td></td>
				{% endif %}
			{% endfor %}
		</tr>
	{% endfor %}
</tbody>
</table>
{% endspaceless %}
{% if series.best_results_to_consider > 0 %}
	<p>
		&#x2021; - {% trans "Result ignored: better result available" %}
	</p>
{% endif %}
{% if has_upgrades %}
	<p>
		&#x2021;&#x2021; - {% trans "Result carried forward from upgrade." %}
	</p>
{% endif %}
{% if series.must_have_completed > 0 %}
	<p>
	{% trans "Competitors must complete" %} {{series.must_have_completed}} {% trans "Events to be eligible." %}
	</p>
{% endif %}
{% if series.best_results_to_consider > 0 %}
	<p>
	{% trans "Best" %} {{series.best_results_to_consider}} {% trans "Events considered." %}
	</p>
{% endif %}
<h3>
{% if series.ranking_criteria == 0 %}
	{% trans "Ranked by Points" %}
{% elif series.ranking_criteria == 1 %}
	{% trans "Ranked by Time" %}
{% elif series.ranking_criteria == 2 %}
	{% trans "Ranked by % Winning Time / Finish Time" %}
{% endif %}
</h3>
<h3>{% trans "Tie-breaking Rules" %}</h3>

{% endblock content %}
